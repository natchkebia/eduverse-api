generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  STUDENT
  INSTRUCTOR
  ADMIN
}

enum CourseType {
  COURSE      // áƒ©áƒ•áƒ”áƒ£áƒšáƒ”áƒ‘áƒ áƒ˜áƒ•áƒ˜ áƒ™áƒ£áƒ áƒ¡áƒ˜
  WORKSHOP    // áƒ•áƒáƒ áƒ™áƒ¨áƒáƒ¤áƒ˜
  MASTERCLASS // áƒ›áƒáƒ¡áƒ¢áƒ”áƒ áƒ™áƒšáƒáƒ¡áƒ˜
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  name      String
  surname   String?
  phone     String?  @unique
  role      Role     @default(STUDENT)
  createdAt DateTime @default(now())
}

model Course {
  id               Int          @id @default(autoincrement())
  slug             String       @unique

  type             CourseType   @default(COURSE)  // ğŸ‘ˆ áƒáƒ¥áƒáƒ áƒ›áƒ—áƒáƒ•áƒáƒ áƒ˜

  originalPrice    Int
  discountedPrice  Int
  discount         String
  imageUrl         String
  isOnline         Boolean      @default(false)
  isGeorgia        Boolean      @default(true)

  titleKa          String
  titleEn          String
  descriptionKa    String
  descriptionEn    String
  altTextKa        String
  altTextEn        String
  buttonKa         String
  buttonEn         String
  formatKa         String
  formatEn         String
  languageKa       String
  languageEn       String

  syllabusKa       String?
  syllabusEn       String?
  mentorKa         String?
  mentorEn         String?

  // OPTIONAL â€“ more specific for events
  date             DateTime?     // áƒ”áƒ áƒ—áƒ“áƒ¦áƒ˜áƒáƒœáƒ˜ áƒ•áƒáƒ áƒ™áƒ¨áƒáƒ¤áƒ˜/áƒ›áƒáƒ¡áƒ¢áƒ”áƒ áƒ™áƒšáƒáƒ¡áƒ˜
  location         String?       // áƒšáƒáƒ™áƒáƒªáƒ˜áƒ áƒáƒ¤áƒšáƒáƒ˜áƒœáƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡

  videos           Video[]
  materials        Material[]

  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
}

model Video {
  id        Int     @id @default(autoincrement())
  url       String
  courseId  Int
  course    Course  @relation(fields: [courseId], references: [id])
}

model Material {
  id        Int     @id @default(autoincrement())
  link      String
  courseId  Int
  course    Course  @relation(fields: [courseId], references: [id])
}

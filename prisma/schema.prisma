generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  STUDENT
  INSTRUCTOR
  ADMIN
}

enum CourseType {
  COURSE      
  WORKSHOP    
  MASTERCLASS 
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String?               
  name      String
  surname   String?
  phone     String?  @unique
  role      Role     @default(STUDENT)
  provider  String?              
  avatar    String?            
  createdAt DateTime @default(now())
}

model Course {
  id               Int          @id @default(autoincrement())
  slug             String       @unique

  type             CourseType   @default(COURSE) 

  originalPrice    Int
  discountedPrice  Int
  discount         String?
  imageUrl         String
  isOnline         Boolean      @default(false)
  isGeorgia        Boolean      @default(true)

  titleKa          String
  titleEn          String
  descriptionKa    String
  descriptionEn    String
  altTextKa        String
  altTextEn        String
  buttonKa         String
  buttonEn         String
  formatKa         String
  formatEn         String
  languageKa       String
  languageEn       String

  syllabusKa       String?
  syllabusEn       String?
  mentorKa         String?
  mentorEn         String?

  // OPTIONAL â€“ more specific for events
  date             DateTime?     
  location         String?       

  videos           Video[]
  materials        Material[]

  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
}

model Video {
  id        Int     @id @default(autoincrement())
  url       String
  courseId  Int
  course    Course  @relation(fields: [courseId], references: [id])
}

model Material {
  id        Int     @id @default(autoincrement())
  link      String
  courseId  Int
  course    Course  @relation(fields: [courseId], references: [id])
}
